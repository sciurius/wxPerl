name: Build on Ubuntu

on: push

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      - name: Install Perl
        run: |
          sudo apt-get remove --purge man-db
          sudo apt-get update
          sudo apt-get install perl
          sudo apt-get install cpanminus
          perl -V
      - name: Install wxWidgets
        run: |
          sudo apt-get update
          apt search wxwidgets
          sudo apt-get install -y --fix-missing libwxgtk3.2-dev
          sudo apt-get install -y --fix-missing libwxgtk-webview3.2-dev
          sudo apt-get install -y --fix-missing libwxgtk-media3.2-dev
          sudo apt-get install -y --fix-missing libalien-wxwidgets-perl
      - name: Install Dependencies
        run: cpanm --installdeps --notest .
      - name: Make, but do not run tests
        run: |
            perl Makefile.PL
            make

